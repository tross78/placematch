var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") return Reflect.decorate(decorators, target, key, desc);
    switch (arguments.length) {
        case 2: return decorators.reduceRight(function(o, d) { return (d && d(o)) || o; }, target);
        case 3: return decorators.reduceRight(function(o, d) { return (d && d(target, key)), void 0; }, void 0);
        case 4: return decorators.reduceRight(function(o, d) { return (d && d(target, key, o)) || o; }, desc);
    }
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
var angular2_1 = require('angular2/angular2');
var http_1 = require('angular2/http');
var Rx = require('@reactivex/rxjs/dist/cjs/Rx');
var HttpClient = (function () {
    function HttpClient(http) {
        this.http = http;
        this.requestNotifier = new Rx.Subject();
    }
    HttpClient.prototype.get = function (url, options) {
        var _this = this;
        this._notify({ type: 'start' });
        return this.http.get(url, options)
            .map(this._mapResponse)
            .do(function (res) { return _this._notify({ type: 'done' }); }, function (err) { return _this._notify({ type: 'error', data: err }); }, function () { return _this._notify({ type: 'complete' }); });
    };
    HttpClient.prototype.post = function (url, body, options) {
        var _this = this;
        this._notify({ type: 'start' });
        return this.http.post(url, body, options)
            .map(this._mapResponse)
            .do(function (res) { return _this._notify({ type: 'done' }); }, function (err) { return _this._notify({ type: 'error', data: err }); }, function () { return _this._notify({ type: 'complete' }); });
    };
    HttpClient.prototype.put = function (url, body, options) {
        var _this = this;
        this._notify({ type: 'start' });
        return this.http.put(url, body, options)
            .map(this._mapResponse)
            .do(function (res) { return _this._notify({ type: 'done' }); }, function (err) { return _this._notify({ type: 'error', data: err }); }, function () { return _this._notify({ type: 'complete' }); });
    };
    HttpClient.prototype.delete = function (url, options) {
        var _this = this;
        this._notify({ type: 'start' });
        return this.http.delete(url, options)
            .map(this._mapResponse)
            .do(function (res) { return _this._notify({ type: 'done' }); }, function (err) { return _this._notify({ type: 'error', data: err }); }, function () { return _this._notify({ type: 'complete' }); });
    };
    HttpClient.prototype.patch = function (url, body, options) {
        var _this = this;
        this._notify({ type: 'start' });
        return this.http.patch(url, body, options)
            .map(this._mapResponse)
            .do(function (res) { return _this._notify({ type: 'done' }); }, function (err) { return _this._notify({ type: 'error', data: err }); }, function () { return _this._notify({ type: 'complete' }); });
    };
    HttpClient.prototype.head = function (url, options) {
        var _this = this;
        this._notify({ type: 'start' });
        return this.http.head(url, options)
            .map(this._mapResponse)
            .do(function (res) { return _this._notify({ type: 'done' }); }, function (err) { return _this._notify({ type: 'error', data: err }); }, function () { return _this._notify({ type: 'complete' }); });
    };
    HttpClient.prototype._notify = function (data) {
        this.requestNotifier.next(data);
    };
    HttpClient.prototype._mapResponse = function (response) {
        if (response.status >= 200 && response.status < 300) {
            return response;
        }
        var error = new Error(response['_body'] ? response['_body'] : response.statusText);
        error['response'] = response;
        throw error;
    };
    HttpClient = __decorate([
        angular2_1.Injectable(), 
        __metadata('design:paramtypes', [http_1.Http])
    ], HttpClient);
    return HttpClient;
})();
exports.HttpClient = HttpClient;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvcmUvaHR0cF9jbGllbnQudHMiXSwibmFtZXMiOlsiSHR0cENsaWVudCIsIkh0dHBDbGllbnQuY29uc3RydWN0b3IiLCJIdHRwQ2xpZW50LmdldCIsIkh0dHBDbGllbnQucG9zdCIsIkh0dHBDbGllbnQucHV0IiwiSHR0cENsaWVudC5kZWxldGUiLCJIdHRwQ2xpZW50LnBhdGNoIiwiSHR0cENsaWVudC5oZWFkIiwiSHR0cENsaWVudC5fbm90aWZ5IiwiSHR0cENsaWVudC5fbWFwUmVzcG9uc2UiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEseUJBQXFDLG1CQUFtQixDQUFDLENBQUE7QUFDekQscUJBQWlELGVBQWUsQ0FBQyxDQUFBO0FBRWpFLElBQVksRUFBRSxXQUFNLDZCQUE2QixDQUFDLENBQUE7QUFFbEQ7SUFLQ0Esb0JBQW9CQSxJQUFVQTtRQUFWQyxTQUFJQSxHQUFKQSxJQUFJQSxDQUFNQTtRQUY5QkEsb0JBQWVBLEdBQUdBLElBQUlBLEVBQUVBLENBQUNBLE9BQU9BLEVBQUVBLENBQUNBO0lBR25DQSxDQUFDQTtJQUVERCx3QkFBR0EsR0FBSEEsVUFBSUEsR0FBV0EsRUFBRUEsT0FBNEJBO1FBQTdDRSxpQkFPQ0E7UUFOQUEsSUFBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsRUFBQ0EsSUFBSUEsRUFBRUEsT0FBT0EsRUFBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDOUJBLE1BQU1BLENBQUNBLElBQUlBLENBQUNBLElBQUlBLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLEVBQUVBLE9BQU9BLENBQUNBO2FBQ2hDQSxHQUFHQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQTthQUN0QkEsRUFBRUEsQ0FBQ0EsVUFBQUEsR0FBR0EsSUFBSUEsT0FBQUEsS0FBSUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsRUFBQ0EsSUFBSUEsRUFBRUEsTUFBTUEsRUFBQ0EsQ0FBQ0EsRUFBNUJBLENBQTRCQSxFQUN0Q0EsVUFBQUEsR0FBR0EsSUFBSUEsT0FBQUEsS0FBSUEs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Q0FBQ0EsQ0FBQ0E7WUFDckRBLE1BQU1BLENBQUNBLFFBQVFBLENBQUNBO1FBQ2pCQSxDQUFDQTtRQUNEQSxJQUFNQSxLQUFLQSxHQUFHQSxJQUFJQSxLQUFLQSxDQUFDQSxRQUFRQSxDQUFDQSxPQUFPQSxDQUFDQSxHQUFHQSxRQUFRQSxDQUFDQSxPQUFPQSxDQUFDQSxHQUFHQSxRQUFRQSxDQUFDQSxVQUFVQSxDQUFDQSxDQUFDQTtRQUNyRkEsS0FBS0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsR0FBR0EsUUFBUUEsQ0FBQ0E7UUFDN0JBLE1BQU1BLEtBQUtBLENBQUNBO0lBQ2JBLENBQUNBO0lBN0VGVDtRQUFDQSxxQkFBVUEsRUFBRUE7O21CQStFWkE7SUFBREEsaUJBQUNBO0FBQURBLENBL0VBLEFBK0VDQSxJQUFBO0FBOUVZLGtCQUFVLGFBOEV0QixDQUFBIiwiZmlsZSI6ImNvcmUvaHR0cF9jbGllbnQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0luamVjdGFibGUsIE9ic2VydmFibGV9IGZyb20gJ2FuZ3VsYXIyL2FuZ3VsYXIyJztcbmltcG9ydCB7SHR0cCwgUmVxdWVzdE9wdGlvbnNBcmdzLCBSZXNwb25zZX0gZnJvbSAnYW5ndWxhcjIvaHR0cCc7XG5cbmltcG9ydCAqIGFzIFJ4IGZyb20gJ0ByZWFjdGl2ZXgvcnhqcy9kaXN0L2Nqcy9SeCc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBIdHRwQ2xpZW50IHtcblxuXHRyZXF1ZXN0Tm90aWZpZXIgPSBuZXcgUnguU3ViamVjdCgpO1xuXG5cdGNvbnN0cnVjdG9yKHByaXZhdGUgaHR0cDogSHR0cCkge1xuXHR9XG5cblx0Z2V0KHVybDogc3RyaW5nLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnNBcmdzKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuXHRcdHRoaXMuX25vdGlmeSh7dHlwZTogJ3N0YXJ0J30pO1xuXHRcdHJldHVybiB0aGlzLmh0dHAuZ2V0KHVybCwgb3B0aW9ucylcblx0XHRcdC5tYXAodGhpcy5fbWFwUmVzcG9uc2UpXG5cdFx0XHQuZG8ocmVzID0+IHRoaXMuX25vdGlmeSh7dHlwZTogJ2RvbmUnfSksXG5cdFx0XHRcdGVyciA9PiB0aGlzLl9ub3RpZnkoe3R5cGU6ICdlcnJvcicsIGRhdGE6IGVycn0pLFxuXHRcdFx0XHQoKSA9PiB0aGlzLl9ub3RpZnkoe3R5cGU6ICdjb21wbGV0ZSd9KSk7XG5cdH1cblxuXHRwb3N0KHVybDogc3RyaW5nLCBib2R5OiBzdHJpbmcsIG9wdGlvbnM/OiBSZXF1ZXN0T3B0aW9uc0FyZ3MpOiBPYnNlcnZhYmxlPFJlc3BvbnNlPiB7XG5cdFx0dGhpcy5fbm90aWZ5KHt0eXBlOiAnc3RhcnQnfSk7XG5cdFx0cmV0dXJuIHRoaXMuaHR0cC5wb3N0KHVybCwgYm9keSwgb3B0aW9ucylcblx0XHRcdC5tYXAodGhpcy5fbWFwUmVzcG9uc2UpXG5cdFx0XHQuZG8ocmVzID0+IHRoaXMuX25vdGlmeSh7dHlwZTogJ2RvbmUnfSksXG5cdFx0XHRcdGVyciA9PiB0aGlzLl9ub3RpZnkoe3R5cGU6ICdlcnJvcicsIGRhdGE6IGVycn0pLFxuXHRcdFx0XHQoKSA9PiB0aGlzLl9ub3RpZnkoe3R5cGU6ICdjb21wbGV0ZSd9KSk7XG5cdH1cblxuXHRwdXQodXJsOiBzdHJpbmcsIGJvZHk6IHN0cmluZywgb3B0aW9ucz86IFJlcXVlc3RPcHRpb25zQXJncyk6IE9ic2VydmFibGU8UmVzcG9uc2U+IHtcblx0XHR0aGlzLl9ub3RpZnkoe3R5cGU6ICdzdGFydCd9KTtcblx0XHRyZXR1cm4gdGhpcy5odHRwLnB1dCh1cmwsIGJvZHksIG9wdGlvbnMpXG5cdFx0XHQubWFwKHRoaXMuX21hcFJlc3BvbnNlKVxuXHRcdFx0LmRvKHJlcyA9PiB0aGlzLl9ub3RpZnkoe3R5cGU6ICdkb25lJ30pLFxuXHRcdFx0XHRlcnIgPT4gdGhpcy5fbm90aWZ5KHt0eXBlOiAnZXJyb3InLCBkYXRhOiBlcnJ9KSxcblx0XHRcdFx0KCkgPT4gdGhpcy5fbm90aWZ5KHt0eXBlOiAnY29tcGxldGUnfSkpO1xuXHR9XG5cblx0ZGVsZXRlKHVybDogc3RyaW5nLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnNBcmdzKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuXHRcdHRoaXMuX25vdGlmeSh7dHlwZTogJ3N0YXJ0J30pO1xuXHRcdHJldHVybiB0aGlzLmh0dHAuZGVsZXRlKHVybCwgb3B0aW9ucylcblx0XHRcdC5tYXAodGhpcy5fbWFwUmVzcG9uc2UpXG5cdFx0XHQuZG8ocmVzID0+IHRoaXMuX25vdGlmeSh7dHlwZTogJ2RvbmUnfSksXG5cdFx0XHRcdGVyciA9PiB0aGlzLl9ub3RpZnkoe3R5cGU6ICdlcnJvcicsIGRhdGE6IGVycn0pLFxuXHRcdFx0XHQoKSA9PiB0aGlzLl9ub3RpZnkoe3R5cGU6ICdjb21wbGV0ZSd9KSk7XG5cdH1cblxuICBwYXRjaCh1cmw6IHN0cmluZywgYm9keTogc3RyaW5nLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnNBcmdzKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuICAgIHRoaXMuX25vdGlmeSh7dHlwZTogJ3N0YXJ0J30pO1xuICAgIHJldHVybiB0aGlzLmh0dHAucGF0Y2godXJsLCBib2R5LCBvcHRpb25zKVxuICAgICAgLm1hcCh0aGlzLl9tYXBSZXNwb25zZSlcbiAgICAgIC5kbyhyZXMgPT4gdGhpcy5fbm90aWZ5KHt0eXBlOiAnZG9uZSd9KSxcbiAgICAgICAgZXJyID0+IHRoaXMuX25vdGlmeSh7dHlwZTogJ2Vycm9yJywgZGF0YTogZXJyfSksXG4gICAgICAgICgpID0+IHRoaXMuX25vdGlmeSh7dHlwZTogJ2NvbXBsZXRlJ30pKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyBhIHJlcXVlc3Qgd2l0aCBgaGVhZGAgaHR0cCBtZXRob2QuXG4gICAqL1xuICBoZWFkKHVybDogc3RyaW5nLCBvcHRpb25zPzogUmVxdWVzdE9wdGlvbnNBcmdzKTogT2JzZXJ2YWJsZTxSZXNwb25zZT4ge1xuICAgIHRoaXMuX25vdGlmeSh7dHlwZTogJ3N0YXJ0J30pO1xuICAgIHJldHVybiB0aGlzLmh0dHAuaGVhZCh1cmwsIG9wdGlvbnMpXG4gICAgICAubWFwKHRoaXMuX21hcFJlc3BvbnNlKVxuICAgICAgLmRvKHJlcyA9PiB0aGlzLl9ub3RpZnkoe3R5cGU6ICdkb25lJ30pLFxuICAgICAgICBlcnIgPT4gdGhpcy5fbm90aWZ5KHt0eXBlOiAnZXJyb3InLCBkYXRhOiBlcnJ9KSxcbiAgICAgICAgKCkgPT4gdGhpcy5fbm90aWZ5KHt0eXBlOiAnY29tcGxldGUnfSkpO1xuICB9XG5cblx0cHJpdmF0ZSBfbm90aWZ5KGRhdGE6IE5vdGlmaWNhdGlvbikge1xuXHRcdHRoaXMucmVxdWVzdE5vdGlmaWVyLm5leHQoZGF0YSk7XG5cdH1cblxuXHQvLyBUT0RPIHJlbW92ZSB0aGlzIGZ1bmN0aW9uIG9uY2UgdGhlIGFuZ3VsYXIyJ3MgaHR0cCBwcm92aWRlciB0aHJvdyBlcnJvcnMgYWNjb3JkaW5nbHkgdG8gaHR0cCBjb2Rlcy5cblx0cHJpdmF0ZSBfbWFwUmVzcG9uc2UocmVzcG9uc2U6IFJlc3BvbnNlKTogUmVzcG9uc2Uge1xuXHRcdGlmIChyZXNwb25zZS5zdGF0dXMgPj0gMjAwICYmIHJlc3BvbnNlLnN0YXR1cyA8IDMwMCkge1xuXHRcdFx0cmV0dXJuIHJlc3BvbnNlO1xuXHRcdH1cblx0XHRjb25zdCBlcnJvciA9IG5ldyBFcnJvcihyZXNwb25zZVsnX2JvZHknXSA/IHJlc3BvbnNlWydfYm9keSddIDogcmVzcG9uc2Uuc3RhdHVzVGV4dCk7XG5cdFx0ZXJyb3JbJ3Jlc3BvbnNlJ10gPSByZXNwb25zZTtcblx0XHR0aHJvdyBlcnJvcjtcblx0fVxuXG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
